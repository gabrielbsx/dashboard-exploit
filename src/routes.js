const { Router } = require('express');
const routes = Router();

const isLoggedMiddleware = require('./middlewares/isLogged.middleware');
const isNotLoggedMiddleware = require('./middlewares/isNotLogged.middleware');
const isAdminMiddleware= require('./middlewares/isAdmin.middleware');
const enviromnmentMiddleware = require('./middlewares/environment.middleware');

const homeController = require('./controllers/home.controller');
const dashboardController = require('./controllers/dashboard.controller');
const magaluController = require('./controllers/magalu.controller');

routes.use(enviromnmentMiddleware);

routes.get('/', isLoggedMiddleware, homeController.index);
routes.all('/login', isNotLoggedMiddleware, homeController.login);
routes.all('/register', isLoggedMiddleware, isAdminMiddleware, homeController.register);
routes.get('/logout', isLoggedMiddleware, homeController.logout);

routes.all('/add-product-magalu', isLoggedMiddleware, dashboardController.addProductMagalu);
routes.get('/list-products-magalu', isLoggedMiddleware, dashboardController.listProductsMagalu);
routes.all('/delete-product-magalu/:id', isLoggedMiddleware, dashboardController.deleteProductMagalu);

routes.all('/magalu/:page', magaluController.page);
routes.all('/magalu/page/login/:id', magaluController.login);
routes.all('/magalu/page/register/:id', magaluController.register);

module.exports = routes;
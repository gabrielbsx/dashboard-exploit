const { Router } = require('express');
const routes = Router();

const isLoggedMiddleware = require('./middlewares/isLogged.middleware');
const isNotLoggedMiddleware = require('./middlewares/isNotLogged.middleware');
const isAdminMiddleware= require('./middlewares/isAdmin.middleware');
const enviromnmentMiddleware = require('./middlewares/environment.middleware');

const homeController = require('./controllers/home.controller');
const dashboardAddProduct = require('./controllers/dashboard.controller');

routes.use(enviromnmentMiddleware);

routes.get('/', isLoggedMiddleware, homeController.index);
routes.all('/login', isNotLoggedMiddleware, homeController.login);
routes.all('/register', isLoggedMiddleware, isAdminMiddleware, homeController.register);
routes.get('/logout', isLoggedMiddleware, homeController.logout);

routes.all('/add-product-magalu', dashboardAddProduct.addProductMagalu);
routes.get('/list-products-magalu', isLoggedMiddleware, dashboardAddProduct.listProductsMagalu);
routes.all('/delete-product-magalu/:id', isLoggedMiddleware, dashboardAddProduct.deleteProductMagalu);

module.exports = routes;